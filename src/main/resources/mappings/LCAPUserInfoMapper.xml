<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
  automatically generated LCAPUser Mapper xml
-->
<mapper namespace="com.weitest.wms.repository.LCAPUserInfoMapper">
    <resultMap id="BaseResultMap" type="com.weitest.wms.domain.entities.LCAPUser">
        <id column="id" jdbcType="BIGINT" property="id" />
        <result column="createdTime" jdbcType="TIMESTAMP" property="createdTime" />
        <result column="updatedTime" jdbcType="TIMESTAMP" property="updatedTime" />
        <result column="userId" jdbcType="VARCHAR" property="userId" />
        <result column="userName" jdbcType="VARCHAR" property="userName" />
        <result column="password" jdbcType="VARCHAR" property="password" />
        <result column="phone" jdbcType="VARCHAR" property="phone" />
        <result column="email" jdbcType="VARCHAR" property="email" />
        <result column="displayName" jdbcType="VARCHAR" property="displayName" />
        <result column="status" jdbcType="VARCHAR" property="status" />
        <result column="source" jdbcType="VARCHAR" property="source" />
    </resultMap>

    <select id="fuzzyQuery" resultMap="BaseResultMap">
        select * from `LCAPUser_79f632` where `userId` like concat('%', concat(#{user.userId}, '%')) or `source` like concat('%', concat(#{user.source}, '%'))
    </select>

    <select id="count" resultType="java.lang.Integer">
        select count(*) from `LCAPUser_79f632` where `userId` = #{user.userId} and `source` = #{user.source}
    </select>

    <select id="getByUserNameAndSource" resultMap="BaseResultMap">
        select * from `LCAPUser_79f632` where `userName` = #{userName} and `source` = #{source}
    </select>

    <select id="getByUserId" resultMap="BaseResultMap">
        select * from `LCAPUser_79f632` where `userId` = #{userId}
    </select>

    <select id="pageQuery" resultMap="BaseResultMap">
        select * from `LCAPUser_79f632`
        <where>
            <if test="name != null and name != ''">
                `userName` LIKE concat('%', concat(#{name}, '%'))
                or
                `displayName` LIKE concat('%', concat(#{name}, '%'))
            </if>
        </where>
        order by `createdTime` desc
        <if test=" size!=null ">
            LIMIT
            #{page},#{size}
        </if>
    </select>

    <select id="pageQueryCount" resultType="java.lang.Long">
        SELECT COUNT(*) FROM `LCAPUser_79f632`
        <where>
            <if test="name != null and name != ''">
                `userName` LIKE concat('%', concat(#{name}, '%'))
                or
                `displayName` LIKE concat('%', concat(#{name}, '%'))
            </if>
        </where>
    </select>
</mapper>
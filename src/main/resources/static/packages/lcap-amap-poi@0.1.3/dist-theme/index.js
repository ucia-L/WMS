(function(e,n){"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define("LcapAmapPoi",[],n):"object"===typeof exports?exports["LcapAmapPoi"]=n():e["LcapAmapPoi"]=n()})(window,(function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=0)}({0:function(e,n,t){t("2b45"),e.exports=t("41f5")},"24fb":function(e,n,t){"use strict";function o(e,n){var t=e[1]||"",o=e[3];if(!o)return t;if(n&&"function"===typeof btoa){var a=i(o),r=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[t].concat(r).concat([a]).join("\n")}return[t].join("\n")}function i(e){var n=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n);return"/*# ".concat(t," */")}e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=o(n,e);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},n.i=function(e,t,o){"string"===typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);o&&i[c[0]]||(t&&(c[2]?c[2]="".concat(t," and ").concat(c[2]):c[2]=t),n.push(c))}},n}},"2b45":function(e,n,t){var o=t("51a5");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=t("499e").default;i("e9ddba52",o,!0,{sourceMap:!1,shadowMode:!1})},3740:function(e,n,t){var o=t("24fb");n=o(!1),n.push([e.i,".index__2TC_tjBh{width:100%;height:500px}.index_container__2TC_tjBh{position:relative;width:100%;height:100%;margin:0;font-size:13px}.index_containertipwrap__2TC_tjBh{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;position:absolute;z-index:10000;background:rgba(0,0,0,.5);-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.index_containertip__2TC_tjBh{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:14px;line-height:14px;color:#fff}",""]),n.locals={root:"index__2TC_tjBh",container:"index_container__2TC_tjBh",containertipwrap:"index_containertipwrap__2TC_tjBh",containertip:"index_containertip__2TC_tjBh"},e.exports=n},"41f5":function(e,n,t){"use strict";t.r(n),t.d(n,"LcapAmapPoi",(function(){return f}));var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:e.$style.root,attrs:{"vusion-disabled-copy":""}},[t("div",{class:e.$style.container,attrs:{id:"container-map"}},[e._m(0),t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],class:e.$style.containertipwrap},[t("div",{class:e.$style.containertip},[e._v("地图不可用，请前往「应用详情」页面「地图配置」，配置key和密钥。如果您已经配置Key，请重新打开可视化编辑页面。")])])])])},i=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"pickerBox"}},[t("input",{attrs:{id:"pickerInput",placeholder:"输入关键字选取地点"}}),t("div",{attrs:{id:"poiInfo"}})])}],a=t("862d"),r=t.n(a),s={name:"lcap-amap-poi",props:{city:{type:String}},data(){return{show:!1,map:null,poiInfo:null,poiPicker:null}},computed:{},watch:{city:{handler(e){this.changeCity(e)},immediate:!1}},mounted(){this.initMap()},created(){const e=this.getJSON(window.appInfo&&window.appInfo.extendedConfig);e&&e.amapCode?window._AMapSecurityConfig={securityJsCode:e.amapCode}:this.show=!0},methods:{changeCity(e){window.lcapmap.setCity(e),window.poiPicker.setCity(e),window.poiPicker.searchByKeyword(e),window.poiPicker.suggest("美食")},initMap(){const e=this.getJSON(window.appInfo&&window.appInfo.extendedConfig);e&&e.amapKey?r.a.load({key:e.amapKey,version:"2.0",AMapUI:{version:"1.1",plugins:["misc/PoiPicker"]}}).then(e=>{console.log(this.city,777),window.lcapmap=this.map=new e.Map("container-map",{city:this.city,lang:"zh_cn",zoom:10}),setTimeout(()=>{this.map.setCity(this.city)},3e3);const n=this.map;function t(t){window.poiPicker=t;const o=new e.Marker,i=new e.InfoWindow({offset:new e.Pixel(0,-20)});t.on("poiPicked",e=>{const t=e.source,a=e.item,r={source:t,id:a.id,name:a.name,location:a.location.toString(),address:a.address};o.setMap(n),i.setMap(n),o.setPosition(a.location),i.setPosition(a.location),i.setContent("POI信息: <pre>"+JSON.stringify(r,null,2)+"</pre>"),i.open(n,o.getPosition()),n.setCenter(o.getPosition()),this.poiInfo=r,console.log(this.poiInfo),this.$emit("select",JSON.stringify(r,null,2))}),t.onCityReady(()=>{t.suggest("美食")})}this.poiPicker=new window.AMapUI.PoiPicker({city:this.city,input:"pickerInput"}),t.call(this,this.poiPicker)}):this.show=!0},poiPicked(){return this.poiInfo?this.poiInfo:(this.$toast.show("请先选择POI信息"),{})},getJSON(e){try{return"string"===typeof e?JSON.parse(e):e||null}catch(n){return null}}}},c=s,p=t("c00b");t("7417");function l(e,n,t,o,i,a,r,s){var c,p="function"===typeof e?e.options:e;if(n&&(p.render=n,p.staticRenderFns=t,p._compiled=!0),o&&(p.functional=!0),a&&(p._scopeId="data-v-"+a),r?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},p._ssrRegister=c):i&&(c=s?function(){i.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(p.functional){p._injectStyles=c;var l=p.render;p.render=function(e,n){return c.call(n),l(e,n)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:p}}function d(e){this["$style"]=p["default"].locals||p["default"]}var u=l(c,o,i,!1,d,null,null),f=u.exports;n["default"]=f},"499e":function(e,n,t){"use strict";function o(e,n){for(var t=[],o={},i=0;i<n.length;i++){var a=n[i],r=a[0],s=a[1],c=a[2],p=a[3],l={id:e+":"+i,css:s,media:c,sourceMap:p};o[r]?o[r].parts.push(l):t.push(o[r]={id:r,parts:[l]})}return t}t.r(n),t.d(n,"default",(function(){return h}));var i="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},r=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,p=!1,l=function(){},d=null,u="data-vue-ssr-id",f="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,n,t,i){p=t,d=i||{};var r=o(e,n);return v(r),function(n){for(var t=[],i=0;i<r.length;i++){var s=r[i],c=a[s.id];c.refs--,t.push(c)}n?(r=o(e,n),v(r)):r=[];for(i=0;i<t.length;i++){c=t[i];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete a[c.id]}}}}function v(e){for(var n=0;n<e.length;n++){var t=e[n],o=a[t.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](t.parts[i]);for(;i<t.parts.length;i++)o.parts.push(w(t.parts[i]));o.parts.length>t.parts.length&&(o.parts.length=t.parts.length)}else{var r=[];for(i=0;i<t.parts.length;i++)r.push(w(t.parts[i]));a[t.id]={id:t.id,refs:1,parts:r}}}}function g(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function w(e){var n,t,o=document.querySelector("style["+u+'~="'+e.id+'"]');if(o){if(p)return l;o.parentNode.removeChild(o)}if(f){var i=c++;o=s||(s=g()),n=y.bind(null,o,i,!1),t=y.bind(null,o,i,!0)}else o=g(),n=M.bind(null,o),t=function(){o.parentNode.removeChild(o)};return n(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;n(e=o)}else t()}}var m=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function y(e,n,t,o){var i=t?"":o.css;if(e.styleSheet)e.styleSheet.cssText=m(n,i);else{var a=document.createTextNode(i),r=e.childNodes;r[n]&&e.removeChild(r[n]),r.length?e.insertBefore(a,r[n]):e.appendChild(a)}}function M(e,n){var t=n.css,o=n.media,i=n.sourceMap;if(o&&e.setAttribute("media",o),d.ssrId&&e.setAttribute(u,n.id),i&&(t+="\n/*# sourceURL="+i.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},"51a5":function(e,n,t){var o=t("24fb");n=o(!1),n.push([e.i,'@font-face{font-family:"ICON_FONT_LOADER_FONTFACE(fontName)";src:ICON_FONT_LOADER_FONTFACE(src)}',""]),e.exports=n},7417:function(e,n,t){"use strict";t("d307")},"862d":function(e,n,t){"use strict";(function(n,t){e.exports=t()})(0,(function(){function e(e){var o=[];return e.AMapUI&&o.push(n(e.AMapUI)),e.Loca&&o.push(t(e.Loca)),Promise.all(o)}function n(e){return new Promise((function(n,t){var s=[];if(e.plugins)for(var c=0;c<e.plugins.length;c+=1)-1==i.AMapUI.plugins.indexOf(e.plugins[c])&&s.push(e.plugins[c]);if(a.AMapUI===o.failed)t("前次请求 AMapUI 失败");else if(a.AMapUI===o.notload){a.AMapUI=o.loading,i.AMapUI.version=e.version||i.AMapUI.version,c=i.AMapUI.version;var p=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/ui/"+c+"/main.js",l.onerror=function(e){a.AMapUI=o.failed,t("请求 AMapUI 失败")},l.onload=function(){if(a.AMapUI=o.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,t=s.length;e<t;e++){var o=s[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}for(n();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()}));else for(n();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},p.appendChild(l)}else a.AMapUI===o.loaded?e.version&&e.version!==i.AMapUI.version?t("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,t=s.length;e<t;e++){var o=s[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}n()})):n():e.version&&e.version!==i.AMapUI.version?t("不允许多个版本 AMapUI 混用"):r.AMapUI.push((function(e){e?t(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,t=s.length;e<t;e++){var o=s[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}n()})):n()}))}))}function t(e){return new Promise((function(n,t){if(a.Loca===o.failed)t("前次请求 Loca 失败");else if(a.Loca===o.notload){a.Loca=o.loading,i.Loca.version=e.version||i.Loca.version;var s=i.Loca.version,c=i.AMap.version.startsWith("2"),p=s.startsWith("2");if(c&&!p||!c&&p)t("JSAPI 与 Loca 版本不对应！！");else{c=i.key,p=document.body||document.head;var l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/loca?v="+s+"&key="+c,l.onerror=function(e){a.Loca=o.failed,t("请求 AMapUI 失败")},l.onload=function(){for(a.Loca=o.loaded,n();r.Loca.length;)r.Loca.splice(0,1)[0]()},p.appendChild(l)}}else a.Loca===o.loaded?e.version&&e.version!==i.Loca.version?t("不允许多个版本 Loca 混用"):n():e.version&&e.version!==i.Loca.version?t("不允许多个版本 Loca 混用"):r.Loca.push((function(e){e?t(e):t()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(o||(o={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},a={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},r={AMap:[],AMapUI:[],Loca:[]},s=[],c=function(e){"function"==typeof e&&(a.AMap===o.loaded?e(window.AMap):s.push(e))};return{load:function(n){return new Promise((function(t,r){if(a.AMap==o.failed)r("");else if(a.AMap==o.notload){var p=n.key,l=n.version,d=n.plugins;p?(window.AMap&&"lbs.amap.com"!==location.host&&r("禁止多种API加载方式混用"),i.key=p,i.AMap.version=l||i.AMap.version,i.AMap.plugins=d||i.AMap.plugins,a.AMap=o.loading,l=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)a.AMap=o.failed,r(i);else for(a.AMap=o.loaded,e(n).then((function(){t(window.AMap)}))["catch"](r);s.length;)s.splice(0,1)[0]()},d=document.createElement("script"),d.type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+p+"&plugin="+i.AMap.plugins.join(","),d.onerror=function(e){a.AMap=o.failed,r(e)},l.appendChild(d)):r("请填写key")}else if(a.AMap==o.loaded)if(n.key&&n.key!==i.key)r("多个不一致的 key");else if(n.version&&n.version!==i.AMap.version)r("不允许多个版本 JSAPI 混用");else{if(p=[],n.plugins)for(l=0;l<n.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(n.plugins[l])&&p.push(n.plugins[l]);p.length?window.AMap.plugin(p,(function(){e(n).then((function(){t(window.AMap)}))["catch"](r)})):e(n).then((function(){t(window.AMap)}))["catch"](r)}else if(n.key&&n.key!==i.key)r("多个不一致的 key");else if(n.version&&n.version!==i.AMap.version)r("不允许多个版本 JSAPI 混用");else{var u=[];if(n.plugins)for(l=0;l<n.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(n.plugins[l])&&u.push(n.plugins[l]);c((function(){u.length?window.AMap.plugin(u,(function(){e(n).then((function(){t(window.AMap)}))["catch"](r)})):e(n).then((function(){t(window.AMap)}))["catch"](r)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},a={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},r={AMap:[],AMapUI:[],Loca:[]}}}}))},"8a6e":function(e,n,t){var o=t("3740");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=t("499e").default;i("aeca6076",o,!0,{sourceMap:!1,shadowMode:!1})},"98eb":function(e,n,t){var o=t("24fb");n=o(!1),n.push([e.i,"#pickerBox{position:absolute;z-index:9999;top:50px;right:30px;width:300px}#pickerInput{width:200px;padding:5px}#poiInfo{background:#fff}.amap_lib_placeSearch .poibox.highlight{background-color:#cae1ff}.amap_lib_placeSearch .poi-more{display:none!important}",""]),e.exports=n},c00b:function(e,n,t){"use strict";var o=t("8a6e"),i=t.n(o);t.d(n,"default",(function(){return i.a}))},d307:function(e,n,t){var o=t("98eb");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=t("499e").default;i("39743f6e",o,!0,{sourceMap:!1,shadowMode:!1})}})}));
//# sourceMappingURL=index.js.map